#include <stdio.h>
#include <string.h>

void IMG_wave_horz_c
(
    const short * i_data,
    const short * lp_filt,
    const short * hp_filt,
    short       * o_data,
    int                   x_dim
);

/* ======================================================================== */   
/*  IMGLIB function-specific alignments. Refer to the                       */   
/*  TMS320C64x IMG Library Programmer's Reference for details.              */   
/* ======================================================================== */   
#pragma DATA_ALIGN(in_data, 4);   
#pragma DATA_ALIGN(qmf, 8);   
#pragma DATA_ALIGN(mqmf, 8);   
   
/* ======================================================================== */   
/*  Constant dataset.                                                       */   
/* ======================================================================== */   
#define COLS (256)   
   
   
/* ======================================================================== */   
/*  Initialize arrays with random test data.                                */   
/* ======================================================================== */   
const short  in_data[COLS] =    
{   
     0x0489,  0x60E2,  0x3E29, -0x23C0,  0x62DF, -0x3AA9,  0x4957,  0x50DA,   
    -0x6C39, -0x0451,  0x0DDE, -0x5773, -0x23B8, -0x2094,  0x49D3, -0x7386,   
     0x0F41,  0x4381,  0x627F, -0x44AF, -0x097C,  0x67E6,  0x0FDD, -0x2119,   
    -0x65A3, -0x38F1, -0x32F1, -0x7499,  0x6286,  0x7E9A,  0x4B32,  0x2CE3,   
     0x12AA, -0x4ED3, -0x0E1E, -0x75AE,  0x4300,  0x2FD1,  0x73F9,  0x0114,   
     0x2796,  0x7606, -0x1031, -0x5E8F,  0x3F0C, -0x3A85,  0x2F67, -0x6D5B,   
     0x2CC9,  0x49CD,  0x5B1D,  0x5EE8, -0x03F4, -0x5EC4, -0x2988,  0x6F70,   
     0x6283,  0x49D8, -0x795C, -0x20A1,  0x3E54,  0x79ED, -0x3E76, -0x5F0C,   
    -0x405A, -0x4783,  0x37FA,  0x1D0E, -0x6FEF,  0x12B6,  0x0577,  0x0F1B,   
    -0x4D65, -0x6EAC, -0x544A,  0x1295, -0x4F77, -0x21FC, -0x0C7B, -0x3A45,   
    -0x45B7, -0x287A, -0x627E,  0x0080, -0x2097, -0x2630,  0x2B80, -0x197C,   
     0x33D0,  0x0E80,  0x6241,  0x528A,  0x5654,  0x2A41,  0x4E85,  0x5720,   
     0x2B7D, -0x0CDC, -0x5075, -0x59F6,  0x4A4F, -0x2161,  0x783A, -0x47ED,   
    -0x724D,  0x6EBC,  0x5584,  0x1C36,  0x16FD,  0x017D,  0x67AD, -0x6302,   
    -0x61E5,  0x5538, -0x7F76,  0x646B,  0x3DC6, -0x0961, -0x1755, -0x0133,   
     0x3596,  0x2020,  0x3C2C, -0x2720,  0x4C3B, -0x4A5A,  0x7126,  0x7893,   
    -0x2844,  0x394E, -0x3857, -0x3F47, -0x3307,  0x0096,  0x0222,  0x4598,   
     0x67A8, -0x28ED,  0x0F7A, -0x2E23, -0x2BAD,  0x3C8E,  0x60C5, -0x3B60,   
    -0x1BEA, -0x3D6A,  0x1493,  0x4060,  0x02D6, -0x3A87,  0x7745,  0x2120,   
     0x506E,  0x645D,  0x3895, -0x090E,  0x1F76,  0x1472,  0x22EC, -0x3D5B,   
    -0x6280, -0x4351,  0x758C,  0x0035, -0x180D, -0x077C, -0x0014,  0x449B,   
     0x4A32, -0x2ACF,  0x72DF, -0x0E7F, -0x0288, -0x7E08, -0x0EA4,  0x3D06,   
     0x1634,  0x1965, -0x4754, -0x47BF,  0x77FA, -0x171C, -0x2547,  0x5BE0,   
     0x212B, -0x1105,  0x1224,  0x59A8, -0x24B0, -0x1346, -0x43E8,  0x333C,   
    -0x7596, -0x7F3B, -0x389A,  0x1F2A, -0x02E3, -0x4445, -0x396F, -0x2E82,   
    -0x557A,  0x6EE2, -0x24F6,  0x10FB, -0x5601,  0x40B9,  0x2895,  0x2D63,   
    -0x399B,  0x742A, -0x424E, -0x23A2, -0x7096,  0x4A5F,  0x656F, -0x6A13,   
     0x439C, -0x40B0, -0x61E6,  0x1F88, -0x5642, -0x70C8, -0x512A, -0x603C,   
     0x2AF2, -0x39E8, -0x4192,  0x6A7D, -0x5D1B, -0x1DF3,  0x5830,  0x72E7,   
    -0x0618, -0x0A08,  0x413A, -0x6CBD, -0x2555,  0x67DE, -0x2FD3, -0x1AD0,   
    -0x48F2,  0x6B1C, -0x5A18, -0x596E, -0x102F, -0x5E85, -0x71A6, -0x4F7A,   
     0x5D99,  0x4B1B, -0x007C,  0x3410, -0x47C1, -0x67D6,  0x71C3, -0x3AB9   
};   
   
const short qmf[8] = {   
    -347, 1078, 1009, -6128,    // Low-pass filter     
    -918, 20673, 23423, 7550   
};   
                                   
const short mqmf[8]= {   
    -7550, 23423, -20673, -918, // High-Pass filter    
     6128, 1009, -1078, -347   
};    
   
   
short  out_data_c[COLS];   
   
short  out_data_c_expected[COLS] = { 11012, -4408, -6596, -22845, 6243, -11910, 30701, -11691, 22391, 32225, -22057, 8634, -24411, -652, -23146, 271, -32200, 10834, 11321, -12714, -2394, -2907, -26721, 4132, -19629, -19800, -19362, 12490, 3169, 29348, 5785, -12803, 4338, -19975, -31867, -8140, -12916, -23081, -21411, -6498, -429, 7751, 26148, 30297, 22517, 19794, -25848, -844, 15281, -25219, -25610, 1103, 13773, -29506, 2572, 21917, -11127, 13802, 13134, 1751, 17735, 18342, -10212, -21471, 8133, 26968, -10414, -8626, 26004, -22688, 2077, 9274, 10945, 28443, 24306, 880, 7355, 32420, 14656, -3817, 3613, 21985, 9436, -7850, -18379, 21102, -17434, 9029, -2969, 21813, 409, 8451, -16637, -18921, -31276, 6664, -26949, -12539, 13966, -15131, 21235, -184, 3865, -27238, 27442, -13871, -20178, -14181, 24402, -5267, -12127, 1385, 12527, 17993, -860, -17574, 12362, -17378, -2057, -28133, 29573, 13425, 16598, -14062, -1019, 1090, 27909, 3007, -2190, -3042, 31741, 15367, 30506, 13844, 7470, 22094, 15796, 6486, 6647, -14979, -4798, 5172, 26467, -15270, 8234, 18363, 24339, 7823, 3123, -16350, -29520, 18368, 19700, -5705, -6437, 5680, -9643, -27100, 13840, -29370, 15173, 14302, -29642, 499, -10497, 2821, -20984, 8579, -3051, -13402, -5048, 15642, 10608, 9931, 469, 6249, -4176, -3452, 29454, 26150, -16730, -5496, 3630, 25809, -7910, 19230, 414, 223, 7810, 7416, 26256, 23240, 31710, -8460, 2356, -7290, 10438, 14902, -5958, 9720, 10311, 7616, -9496, -32395, -785, -2887, 10444, 5431, -3245, 30157, -8413, -909, 4154, 31669, 6446, 14466, -13429, -9207, -29202, -13640, -6861, 4516, -21413, -7584, -23817, 11376, -8394, 5716, -17659, -27157, -16851, -5268, -22637, -26199, -14144, 10563, -29791, -14412, -15468, 10757, 21319, -13299, 32133, 19817, -22600, 26714, 2401, -28268, -9575, -30422, 22612, -6423, 22693, -19822, -10100, -22367 };   


int main(int argc, char** argv)   
{      

	IMG_wave_horz_c(in_data, qmf, mqmf, out_data_c, COLS);   

	if (argc > 42 && ! strcmp(argv[0], ""))	printf("%hd", out_data_c[COLS-1]);

	int i;
	for(i=0; i < COLS; i++) {
			if(out_data_c[i] != out_data_c_expected[i]) {
					return 1;
			}
	}
	return 10;

}   
