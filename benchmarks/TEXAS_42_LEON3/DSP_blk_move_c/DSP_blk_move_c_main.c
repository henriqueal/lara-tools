#include <stdio.h>
#include <string.h>

void DSP_blk_move_c(short   *x, short *r, int nx);

/* ======================================================================== */   
/*  Constant dataset.                                                       */   
/* ======================================================================== */   
#define NX   (64)   
   
   
/* ======================================================================== */   
/*  Initialize arrays with random test data.                                */   
/* ======================================================================== */   
short  x[NX] =    
{   
     0x2224, -0x0CAA,  0x39B7, -0x4348, -0x569E,  0x635D, -0x29ED, -0x679F,   
     0x0202,  0x4C93, -0x2FE2, -0x3B83, -0x0754,  0x0C48, -0x3E5A, -0x294B,   
    -0x1CE8,  0x5F31, -0x6FAB,  0x1931, -0x242E, -0x272B, -0x285F,  0x0FD5,   
    -0x778E,  0x4BE9, -0x0D97,  0x2277, -0x5888, -0x2076, -0x4D51,  0x062B,   
    -0x6D5F, -0x6BF3,  0x6D9D, -0x4F2B,  0x7E7B, -0x02B5,  0x285E, -0x67C3,   
    -0x7EA2, -0x5984, -0x1308, -0x45A5,  0x2EEA,  0x5D12, -0x537B,  0x6299,   
     0x2790, -0x2D3C, -0x61AD, -0x7A5C,  0x2FEE,  0x335D, -0x7989, -0x36FE,   
     0x5D1B, -0x3188, -0x29AE,  0x4F87,  0x0B47, -0x4E41, -0x6623,  0x3E34   
};   
   
short  r_c[NX];   

// MicroBlaze (ReflectC, LLVM330), LEON3, X86
short  r_c_expected[NX] = { 8740, -3242, 14775, -17224, -22174, 25437, -10733, -26527, 514, 19603, -12258, -15235, -1876, 3144, -15962, -10571, -7400, 24369, -28587, 6449, -9262, -10027, -10335, 4053, -30606, 19433, -3479, 8823, -22664, -8310, -19793, 1579, -27999, -27635, 28061, -20267, 32379, -693, 10334, -26563, -32418, -22916, -4872, -17829, 12010, 23826, -21371, 25241, 10128, -11580, -25005, -31324, 12270, 13149, -31113, -14078, 23835, -12680, -10670, 20359, 2887, -20033, -26147, 15924 };   

int main(int argc, char** argv)   
{      
   
    DSP_blk_move_c(x, r_c, NX);   

    if (argc > 42 && ! strcmp(argv[0], ""))	printf("%hd", r_c[NX-1]);

    int i;
    printf("\n");
    for(i=0; i<NX; i++) {
		if(r_c[i] != r_c_expected[i]) {
			return 1;
		}
    }
    printf("\n");

    return 10;

}   
