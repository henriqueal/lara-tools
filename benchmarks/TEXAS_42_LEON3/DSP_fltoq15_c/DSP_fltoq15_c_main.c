#include <stdio.h>
#include <string.h>

void DSP_fltoq15_c
(
    const float * x,
    short       * r,
    int         nx
);

/* ======================================================================== */   
/*  Constant dataset.                                                       */   
/* ======================================================================== */   
#define NX   (20)   
   

/* ======================================================================== */
/*  Initialize arrays with random test data.                                */
/* ======================================================================== */
float  x[NX] =
{
	- 0.9496202,   0.9389323,   0.6501744,   0.9890941,
	- 0.6149895,   0.1934405, - 0.0888628, - 0.1593419,
	0.9673895,   0.0888673,   0.4763519,   0.1117054,
	- 0.4901115,   0.7792529, - 0.9710504, - 0.6598921,
	0.3299095, - 0.3781488,   0.9893967,   0.9076802
};

short  r_c[NX];

 short  r_c_expected[NX] = { -31117, 30766, 21304, 32410, -20151, 6338, -2911, -5221, 31699, 2912, 15609, 3660, -16059, 25534, -31819, -21623, 10810, -12391, 32420, 29742 };

int main()   
{      
	DSP_fltoq15_c(x, r_c, NX);   

	printf("%hd", r_c[NX-1]);

        int i;
        for(i=0; i < NX; i++) {
//                printf("%d, ", r_c[i]);
                if(r_c[i] != r_c_expected[i]) {
                        return 1;
                }
        }
        return 10;

}   

